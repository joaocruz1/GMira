generator client {
  provider = "prisma-client-js"
}

// Configuração do seed
// Execute: npm run prisma:seed

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  MASCULINO
  FEMININO
  OUTRO
}

enum InfluencerStatus {
  PENDING
  PUBLISHED
  REJECTED
}

model Influencer {
  id             String            @id @default(uuid())
  name           String
  slug           String?           @unique // Slug para URL amigável
  photo          String?           // URL da foto do perfil
  email          String?
  phone          String?
  instagram      String?
  tiktok         String?
  youtube        String?
  city           String
  niche          String
  bio            String
  gender         Gender
  followers      String?
  reach          String?
  engagement     String?
  views30Days    String?           // Vizualizações 30 dias
  reach30Days    String?           // Alcance 30 dias
  averageReels   String?           // Média por reels
  localAudience  String?           // Público local
  priceMin       String?           // ex: "R$ 150"
  priceClient    String?           // ex: "R$ 2.500,00"
  priceCopart    String?           // ex: "R$ 1.200,00"
  priceVideo     String?           // Cachê de vídeo
  priceRepost    String?           // valor informado no formulário
  priceFinal     String?           // Preço final (esse preço final é o que vamos usar)
  restrictions   String?
  services       String?           // JSON array de serviços
  portfolio      String?           // JSON array de itens do portfolio
  reviews        String?           // JSON array de avaliações
  status         InfluencerStatus  @default(PENDING)
  displayOrder   Int?              // Ordem de exibição no catálogo
  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String?
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Analytics {
  id            String   @id @default(uuid())
  eventType     String   // 'profile_view', 'whatsapp_click', 'catalog_access'
  influencerId  String?  // ID do influenciador (null para eventos do catálogo)
  metadata      String?  // JSON com dados adicionais
  createdAt     DateTime @default(now())
  
  @@index([eventType])
  @@index([influencerId])
  @@index([createdAt])
}


